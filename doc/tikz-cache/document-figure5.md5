\begingroup \toks 0={macro:->[scale=1, rect/.style={minimum width={width("timestamp")+16pt}}] \node [style=scircle, inner sep=6pt, fill=Green!20!White, draw=Green!20!White,align=center, minimum width={width("control")+12pt},] (0) at (0, 16) {power:\\on}; \node [style=scircle, inner sep=6pt, fill=Green!20!White, draw=Green!20!White, align=center] (1) at (0, 12.5) {control:\\start}; \node [style=diamond, inner sep=8pt, align=center, fill=Blue!20!White, draw=Blue!20!White] (2) at (0, 9) {if i < n}; \node [style=rect, inner sep=8pt, align=center, fill=Yellow!20!White, draw=Yellow!20!White] (3) at (0, 6) {switch to\\sensor i}; \node [style=rect, inner sep=8pt, align=center, fill=Yellow!20!White, draw=Yellow!20!White] (4) at (0, 4) {read ADC}; \node [style=rect, inner sep=8pt, align=center, fill=Yellow!20!White, draw=Yellow!20!White] (5) at (0, 2) {create\\timestamp}; \node [style=rect, inner sep=8pt, align=center, fill=Blue!20!White, draw=Blue!20!White] (6) at (0, 0) {i++}; \node [style=rect, inner sep=8pt, align=center, fill=Yellow!20!White, draw=Yellow!20!White] (7) at (4, 9) {send data\\to GUI}; \node [style=rect, inner sep=8pt, align=center, fill=Blue!20!White, draw=Blue!20!White] (8) at (4, 11) {i = 0}; \par \node [style=scircle, inner sep=6pt, fill=Red!20!White, draw=Red!20!White,align=center, minimum width={width("control")+12pt},] (100) at (-7, 16) {power:\\off}; \par \node [style=scircle, inner sep=6pt, fill=Green!20!White, draw=Green!20!White,align=center, minimum width={width("control")+12pt},] (200) at (-4, 16) {power:\\on}; \node [style=scircle, inner sep=6pt, fill=Red!20!White, draw=Red!20!White, align=center] (201) at (-4, 12.5) {control:\\stop}; \par \draw [style=arrow, ultra thick] (0) to (1); \draw [style=arrow, ultra thick] (200) to (201); \draw [style=arrow, ultra thick] (1) to (2); \draw [style=arrow, ultra thick] (2) to node[right] {true} (3); \draw [style=arrow, ultra thick] (3) to (4); \draw [style=arrow, ultra thick] (6) to (-2,0) to (-2,9) to (2); \draw [style=arrow, ultra thick] (4) to (5); \draw [style=arrow, ultra thick] (5) to (6); \draw [style=arrow, ultra thick] (2) to node[below] {false} (7); \draw [style=arrow, ultra thick] (7) to (8); \draw [style=simple, ultra thick] (8) to (0,11); \draw [dashed] (-5.5,17) -- (-5.5,-0.5); \draw [dashed] (-2.5,17) -- (-2.5,-0.5); }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
